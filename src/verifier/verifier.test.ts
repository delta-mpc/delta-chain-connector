import * as chai from "chai";
import chaiAsPromised from "chai-as-promised";
import { exportCallData } from ".";

chai.use(chaiAsPromised);
const assert = chai.assert;

describe("verifer", () => {
  const proof =
    "{\"A\":[\"13989034285667332156863945648246897742674312644133132588373172835712588341153\",\"5778726377028194157326570132911467619850434533037748124717051431170636978473\",\"1\"],\"B\":[\"7067988665891297605009556013994645698259560744489349482939628863695178106149\",\"3772641902673928269308252846097173328741387070269402122961261392634566718339\",\"1\"],\"C\":[\"18076880681698079363538206973762272139905501717577910388157927392291980245900\",\"4935815316812856497349036381677145356004722377435339508751844815015243310204\",\"1\"],\"Z\":[\"4149404417037143409963150090542277946936707828941879779695691354595910800811\",\"13556978960241709399146172497703856702084938517589912645237126819962813143860\",\"1\"],\"T1\":[\"8289540291413456751366034229385039652935951787981229417089526810905739594141\",\"6286515015273322741550608206414077974633693837790210572280564293179623798757\",\"1\"],\"T2\":[\"13833987513537201287546169846756552683447371358907114576816714749174310288608\",\"12512688588930653647926172747413577527834504363572762172086871991189445619400\",\"1\"],\"T3\":[\"6882109800166642453526289235605128864108351565361407044449215505533636890557\",\"61590497150453077797057837950959375353874323908322149746048922926860196244\",\"1\"],\"eval_a\":\"12898297461251965369578031204217522202291648993068625717720394577876244771323\",\"eval_b\":\"16906856015390455709233565884736716676955779941021643781713154533385019315556\",\"eval_c\":\"13708333598733630691539421243869251790223241445099711061414908868648134072750\",\"eval_s1\":\"5687624493605359331856737705531888037276978580018672829449163060450999654690\",\"eval_s2\":\"7006571840591234412856343835916889617606267189975030540021236008759160050641\",\"eval_zw\":\"1288929679404388863956973957139693728654822044168978603659468368994894316098\",\"eval_r\":\"9567287344224728287155998783342384298725379281359290876413759823154289964166\",\"Wxi\":[\"7179084238719293720469501309467860616905930952121686397311179093011643220880\",\"2378002621023216790784026892808797364630938303939799035332551852170058147012\",\"1\"],\"Wxiw\":[\"18089386244511803320810813708080348105684460352538469969259679547565493049373\",\"17133643524870634106124851557608310040548287865712255292603319459784458626059\",\"1\"],\"protocol\":\"plonk\",\"curve\":\"bn128\"}";
  const pubSignals = [
    "21888242871839275222246405745257275088548364400416034299972841686575808495617",
    "29",
    "21888242871839275222246405745257275088548364400416034017709454186575808495617",
    "29",
    "21888242871839275222246405745257275088548364400416034336161954186575808495617",
    "29",
    "4485354118406336729363675711000348342713746016780773923827638902243253344914",
    "6981156750146001390596683852942006945948523736948468087198643842575491393764",
  ];

  it("export calldata", async () => {
    const [_proof, _pubSignals] = await exportCallData(proof, pubSignals);
    assert.strictEqual(
      _proof,
      "0x1eed8348254f891a0feb5be2fc20c1875819a55a7c60c870440c422cfd885fa10cc6a4aa3547c1a3cb3ac84e8a380c89cb803e39cea55d29d4cc2ecf6cc719290fa056fe533bb55d43bcf1084c6ffb3aa60ad37a15ec054eff57e4dcb547052508573d597f551a34af6f68071cb140332e1b07b1ba4a0511ddab7c8ceae4b38327f726e21914a7ce9dabdc1691336f8fa8133c74de2f7358ed77f723cbbefb8c0ae9928d515af7bc71929701a7e683e19dce0804485ce9636e81a10c435a647c092c7acbda87f8c5a1860971526e7780cd4e8d06ff51f5c7429897c10774d5ab1df8fa6970d0bd5226a1e0a03e7a0308cd5ac10eff320d7e96e7d1980a9bdb341253b6aa5a5268376d4f672fa46df2193e9561e0c9a3e3e8a1b0202de5cd099d0de60a999c43979a335950c2c41cf8ef9e1bc4bbc3af71c369e7c5abfd86f7e51e95c26bbcc9a32788567102f7356842853de011b3f129c26374898fef04bce01ba9ee46c1c95ee02e5c7250d6dcc0e87e828bed42bbaccafff8728a0f452ec80f3722d8013d627dda8a92d52b934587fc9ed33cc0c493527185a7625472cfbd0022dbe6822fe942fb40139f68389f55a8f8992d1d7134b22711db030b67d9940fdf37ba254684dc02e8525d60df6dc727000740d68e9b10014232d0db5bc3900541e6db7b8533ab7408bd0d11a12214fd1eb1945f4ca744b99dad00b16824c427fe3ad333fa2d714134f190184ceb44f7730a89366141422c18e74a9bfdd81d25e14c6f761b9a0d75356d0163997b8488882072d25ef6124ef85ae952b9e40b1c842d7ac44797cb2aa34377a7b18dae12be896f9979f1745c8da26a262c31fb2560f0ff35f2572f5cb6dadd9633ca72538b332fc92b854db56348568ea7d5641e4ea45100401af1c7147d4ffe0779a361b1eb644a86a2d9a016fffa365d59ae0c9314d58b78f30f4a0ceaf0c7e5cb1992bf1b4c7bcf333ee94dfe343543d9220f7d9441a9ddf32b8205dad6123266a0826eb2971861482e981a4e65585193d102d98222f24e0986cdb5c919e3a6aeff703c17f1367bd7f6a99b49b227c782421526e48aa03c7b336ad5e3c525e8eb3a3f22572fa2ecb1838faaa1e4e565f486"
    );
    assert.deepStrictEqual(_pubSignals, [
      "0x30644e72e131a029b85045b68181585d2833e84879b9674ee8947eba29d7c001",
      "0x000000000000000000000000000000000000000000000000000000000000001d",
      "0x30644e72e131a029b85045b68181585d2833e84879b92b89612eb2ff8b650001",
      "0x000000000000000000000000000000000000000000000000000000000000001d",
      "0x30644e72e131a029b85045b68181585d2833e84879b96ef8b9677f5776670001",
      "0x000000000000000000000000000000000000000000000000000000000000001d",
      "0x09ea9ed6d70cd296187459b9256c3f290565ccedc317f96f539bc46df73cda92",
      "0x0f6f31d790c79863387ddcbe761748b5dc72837e62035cc85e8eb136d727e8e4",
    ]);
  });
});
