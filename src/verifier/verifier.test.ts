import * as chai from "chai";
import chaiAsPromised from "chai-as-promised";
import { exportCallData } from ".";

chai.use(chaiAsPromised);
const assert = chai.assert;

describe("verifer", () => {
  const proof =
    "{\"A\":[\"636263409642223480755202506638931949375986131692717851857258308190530345326\",\"3458166464521518318248967484557553570159238134090644197643926714109574042932\",\"1\"],\"B\":[\"14362586937602535814816823496985574360269467705227751911961015587656944948083\",\"1870620977389133455253816535345976517130532597691250104906065470129588350120\",\"1\"],\"C\":[\"18954541704309916040148652646335478583861155457345473439643061773104903810248\",\"13664293841463047803872783542454630100774207583451843726772602648738914608595\",\"1\"],\"Z\":[\"14749978331526011815543264205861361632624185274345833155767367110081325786792\",\"21249511926596568465274108576891414111830507942957030375018835529475321428875\",\"1\"],\"T1\":[\"7181157147208144283611167454066297144944141619789892715375833966149251924799\",\"4260460871613446379187866385285753935617339590991362801611692341679983890271\",\"1\"],\"T2\":[\"3013255070272528442566986847471590750638067260181241811920783941478585829677\",\"3023576744162355144559140787496505103014134281023991682400197778517716110101\",\"1\"],\"T3\":[\"16012144006274061429352636468965994654407264487927925309709095205269370823369\",\"2414695899212897788171871583946359249504526384995686713923732734864250063841\",\"1\"],\"eval_a\":\"13301639695968749561235390383633865826171532168089467079500126385009181431809\",\"eval_b\":\"15698999220889832822174817004790052405753361649565587529229026309890841979995\",\"eval_c\":\"1835434663319944499369926979451853223238647503891906722714108222860394001226\",\"eval_s1\":\"15381887482378061156033203087720242647578585121796569119915935212952127612774\",\"eval_s2\":\"10298249318421057064492178076544439958096078088122025717723938505045913912138\",\"eval_zw\":\"1075182852359312608839765494621622851108123872093631717655984591450492764423\",\"eval_r\":\"19922321998626883430598586253357083029674759223177760170909215199869805604271\",\"Wxi\":[\"15175945916337081668609561261549156520831324477974389284775681172043139897251\",\"4459935903798911969757623578487967899666407156829131324391968101404929508871\",\"1\"],\"Wxiw\":[\"15861756358030334766990188818995173244254089501947528941883220354753815467096\",\"15958868884643683813190873244625119479193175861084626962762340137214113278956\",\"1\"],\"protocol\":\"plonk\",\"curve\":\"bn128\"}";
  const pubSignals = [
    "45191926979062500000000000000",
    "29",
    "267591953685000000000000000000",
    "29",
    "0",
    "29",
    "4485354118406336729363675711000348342713746016780773923827638902243253344914",
    "12491785436441952246131977283207663900873480131562437076931999384071026800528",
  ];

  it("export calldata", async () => {
    const [_proof, _pubSignals] = await exportCallData(proof, pubSignals);
    assert.strictEqual(
      _proof,
      "0x12657b15f1d56b80b39042d44c150f5678b52bdde96fae5bf59031850e6a62e90f0004ee8321a1cd297db050eccca474bbbe1141fcb1d05536cd0d2c5b8638d92ed0c205583d22b10c971357269de3f4d163e41a4605fb63a67b0062bdb816f40e056a22dd1a7b4c095f34c99835b5a3c2c70bb934ac90194905e0cb60fd67490c66fb3c3de42eaa1b9a8f3045b89e412efbb98bd35e75320e6cae88257789581c59f7375f86f45dae5c3602c7e4b2751a2e598f1ca9dc57281c11b65a538d830bf29cb843ced7d5b8c786ee9b73db05c0c5fd7d9297b9694eb85e06c5bb014e15f4b898ef419a35746fcc678a66b6aefe2cebd6dd034a53f6d64321d544e3ff244c4d0d60522baf4d8f18246ed6db9c05bd039f6096838fe5d760cd86ccb70415f34ccb7b797851e90f607cfffb342ba327cbddd6a68df9ebe2089ff179d45b2976057ac29154a74123f03b54bc9982b8229c224b04a9b75a5b5ee832ef5c5d2b5ca7ba74bc5dee52dbb2a217d7cfd460c24d673e937d84ad936898babd6ebe1e217dcd268872fc7e8eec662c37ce186d71910e14af3d2dc901aa61d991d30c26bd158edb19db94d516b8c50f92ff4f5da8b724881ffa044c767d58261b81071afe612d1538501fac6995deb8b5178c8704c5e11eb6a800320efab3c74fc1421fbbb0330d58499cf465ee67e011971d3f880d675ea98a98d33202a3e7f130080a7b12f3710c6dbea94d56ab5e6da5f2ebe78bf69c3ae1317967b33fe08640c523e5dbe78869cd50b1dc6e5843f9571927fc97476a8da53eea8ef292d539c67e26252fdab93c8a474e6eb7ece07e196bff09aa18fb5a30b3b9c9a12624e0a9441b7d74e7bd8930351e0f4a3df311c2ed90ad3e23acb75883ee7d01b016eba57d087e6248a2d9e3d7de6c7cb7da4f0de34b7298b4c85b7dbf07e726194dd3b3dd0c1d2b0c18c4eb6f4e46d35616668fe746cc509a70669c881f50afd285923cc619a772aafeceaacaa81c0920f38684b2b6867183108d3e811135223242b2ca7724be4eee1842c65a2c9ac9474a061445d34befaf2fc50e962f6a438a6acecab116ff629df2f452b053eea2d6a94bd5c4185ac6e68134e8d89885f32364768f5b"
    );
    assert.deepStrictEqual(_pubSignals, [
      "0x0000000000000000000000000000000000000000a8ddf87093b5b09c2b10c000",
      "0x000000000000000000000000000000000000000000000000000000000000001d",
      "0x0000000000000000000000000000000000000003eff1a3d33cc434dc387c0000",
      "0x000000000000000000000000000000000000000000000000000000000000001d",
      "0x0000000000000000000000000000000000000000000000000000000000000000",
      "0x000000000000000000000000000000000000000000000000000000000000001d",
      "0x111da4b536325aca16982ce6fbcb52c06e6708b4976e0b0dbddb022776ff9ffc",
      "0x1b9e1999bd3aede0f518ac01efbbc4c6397f311f8fb1b4d9a789b92440e87790",
    ]);
  });
});
